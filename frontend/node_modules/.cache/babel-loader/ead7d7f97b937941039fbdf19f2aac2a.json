{"ast":null,"code":"var _jsxFileName = \"/home/mr_tross/Fullstack/torelax/src/components/ResponseFrame/Response.js\";\nimport { Provider } from 'react-redux';\nimport { connect } from \"react-redux\";\nimport ActivitiesElemPresentation from '../ActivitiesFrame/ActivitiesElem/ActivitiesElemPresentation';\nimport styles from './index.module.css';\nimport React, { useState, useEffect } from 'react';\nimport Text from '../Text/Text';\nimport Button from '../Button/Button';\nimport classnames from 'classnames';\n\nfunction getMinutes(time) {\n  return parseInt(time.substring(0, 2)) * 60 + parseInt(time.substring(3, 5));\n}\n\nfunction getResponse(data, request) {\n  return getMax(data, getMinutes(request));\n}\n\nfunction getMax(data, minutes) {\n  if (data.length === 0) {\n    return {\n      data: [],\n      sum: 0\n    };\n  }\n\n  let max_sum = 0;\n  let max_data = [];\n  data.forEach((item, index, array) => {\n    let curr_data = data.slice();\n    let removed = curr_data.splice(index, 1);\n    let curr_minutes = getMinutes(removed[0].time);\n\n    if (curr_minutes <= minutes) {\n      let curr = getMax(curr_data, minutes - getMinutes(removed[0].time));\n\n      if (curr.sum + removed[0].rating * curr_minutes > max_sum) {\n        max_sum = curr.sum + removed[0].rating * curr_minutes;\n        max_data = removed.concat(curr.data);\n      }\n    }\n  });\n  return {\n    data: max_data,\n    sum: max_sum\n  };\n}\n\nfunction Response(props) {\n  const [move, setMove] = useState(false);\n  useEffect(() => {\n    setMove(true);\n  }, []);\n  const request = props.request.request; // WARNING!!! VERY BAD REALISATION\n\n  const resp = getResponse(props.data, request);\n  const response = resp.data;\n  const satisfaction = resp.sum / (getMinutes(request) * 5);\n\n  let onToActivities = event => {\n    event.preventDefault();\n    props.history.push('/activities');\n  };\n\n  let onToMain = event => {\n    event.preventDefault();\n    props.history.push('/');\n  };\n\n  let colors = [\"#BABABA\", \"#BABABA\", \"#BABABA\", \"#BABABA\", \"#BABABA\"];\n\n  for (let i = 0; i <= satisfaction * 4; i++) {\n    colors[i] = \"#FBFF4E\";\n  }\n\n  const arrowClass = classnames(styles.arrow, {\n    [styles.moving]: move\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.mainFrame,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    textStyle: 0,\n    color_name: 'blue',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \"RELAX\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.activities_list,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, response.map((elem, index, array) => /*#__PURE__*/React.createElement(ActivitiesElemPresentation, {\n    key: elem.id,\n    props: elem,\n    moving: move,\n    delay: 100 * (array.length - index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.scales,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"335\",\n    height: \"165\",\n    viewBox: \"0 0 335 165\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23.5442 24L8.434e-06 68.5263L0 165L335 165L335 68.5263L312.801 24L23.5442 24Z\",\n    fill: \"#828282\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M159 61C108.19 61 67 102.638 67 154H251C251 102.638 209.81 61 159 61Z\",\n    fill: \"#F2F2F2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"153\",\n    y: \"66\",\n    width: \"7\",\n    height: \"18\",\n    fill: \"#333333\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"95.7709\",\n    y: \"94.7069\",\n    width: \"6.71741\",\n    height: \"18.8087\",\n    transform: \"rotate(-45 95.7709 94.7069)\",\n    fill: \"#333333\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"73\",\n    y: \"150\",\n    width: \"6\",\n    height: \"19\",\n    transform: \"rotate(-90 73 150)\",\n    fill: \"#333333\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"219.236\",\n    y: \"89.957\",\n    width: \"6.71741\",\n    height: \"18.8087\",\n    transform: \"rotate(45 219.236 89.957)\",\n    fill: \"#333333\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"247\",\n    y: \"144\",\n    width: \"6\",\n    height: \"19\",\n    transform: \"rotate(90 247 144)\",\n    fill: \"#333333\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M52 131L54.9187 139.637H64.3637L56.7225 144.975L59.6412 153.613L52 148.275L44.3588 153.613L47.2775 144.975L39.6363 139.637H49.0813L52 131Z\",\n    fill: colors[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M82 63L84.9187 71.9828H94.3637L86.7225 77.5344L89.6412 86.5172L82 80.9656L74.3588 86.5172L77.2775 77.5344L69.6363 71.9828H79.0813L82 63Z\",\n    fill: colors[1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M157 32L159.919 41.3283H169.364L161.723 47.0935L164.641 56.4217L157 50.6565L149.359 56.4217L152.277 47.0935L144.636 41.3283H154.081L157 32Z\",\n    fill: colors[2],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M242 63L244.919 71.9828H254.364L246.723 77.5344L249.641 86.5172L242 80.9656L234.359 86.5172L237.277 77.5344L229.636 71.9828H239.081L242 63Z\",\n    fill: colors[3],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M267 131L269.919 139.637H279.364L271.723 144.975L274.641 153.613L267 148.275L259.359 153.613L262.277 144.975L254.636 139.637H264.081L267 131Z\",\n    fill: colors[4],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"7\",\n    width: \"321\",\n    height: \"20\",\n    fill: \"#828282\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"svg\", {\n    className: styles.arrow,\n    style: {\n      transitionDuration: 0.5 * satisfaction + \"s\",\n      transitionDelay: 100 + 100 * response.length + \"ms\",\n      transform: false && \"translateX(-100%) translateY(-25px) rotate(\" + satisfaction * 180 + \"deg)\"\n    },\n    width: \"71\",\n    height: \"14\",\n    viewBox: \"0 0 71 14\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 10.2667L0 4.2L71 -5.96046e-08V14L0 10.2667Z\",\n    fill: \"#FF0000\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.column,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onToMain,\n    inversed: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, \"Override relax time\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: onToActivities,\n    inversed: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, \"Go to my activities\")));\n}\n\nconst mapStateToProps = state => {\n  return {\n    data: state.data\n  };\n};\n\nexport default connect(mapStateToProps)(Response);","map":{"version":3,"sources":["/home/mr_tross/Fullstack/torelax/src/components/ResponseFrame/Response.js"],"names":["Provider","connect","ActivitiesElemPresentation","styles","React","useState","useEffect","Text","Button","classnames","getMinutes","time","parseInt","substring","getResponse","data","request","getMax","minutes","length","sum","max_sum","max_data","forEach","item","index","array","curr_data","slice","removed","splice","curr_minutes","curr","rating","concat","Response","props","move","setMove","resp","response","satisfaction","onToActivities","event","preventDefault","history","push","onToMain","colors","i","arrowClass","arrow","moving","mainFrame","activities_list","map","elem","id","scales","transitionDuration","transitionDelay","transform","column","mapStateToProps","state"],"mappings":"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","sourcesContent":["import {Provider} from 'react-redux'\nimport {connect} from \"react-redux\";\nimport ActivitiesElemPresentation from '../ActivitiesFrame/ActivitiesElem/ActivitiesElemPresentation'  \nimport styles from './index.module.css';\nimport React, {useState, useEffect} from 'react';\nimport Text from '../Text/Text'\nimport Button from '../Button/Button'\nimport classnames from 'classnames'\n\n\nfunction getMinutes(time) {\n    return parseInt(time.substring(0, 2)) * 60 + parseInt(time.substring(3, 5));\n}\n\nfunction getResponse(data, request) {\n    return getMax(data, getMinutes(request));\n}\n\nfunction getMax(data, minutes) {\n    if (data.length === 0) {\n        return {\n            data: [],\n            sum: 0\n        };\n    }\n    let max_sum = 0;\n    let max_data = [];\n    data.forEach((item, index, array)=> {\n        let curr_data = data.slice();\n        let removed = curr_data.splice(index, 1);\n        let curr_minutes = getMinutes(removed[0].time);\n        if (curr_minutes <= minutes) {\n             let curr = getMax(curr_data, minutes - getMinutes(removed[0].time))\n            if (curr.sum + removed[0].rating * curr_minutes > max_sum) {\n                max_sum = curr.sum + removed[0].rating * curr_minutes; \n                max_data = removed.concat(curr.data)\n            }\n        }\n    });\n    return {\n        data: max_data,\n        sum: max_sum\n    };\n}\n\n\n\nfunction Response(props) {\n    const [move, setMove] = useState(false)\n    useEffect(() => {\n        setMove(true)\n      }, []);\n\n    const request = props.request.request\n    // WARNING!!! VERY BAD REALISATION\n    const resp = getResponse(props.data, request)\n    const response = resp.data\n    const satisfaction = resp.sum / (getMinutes(request) * 5)\n\n    let onToActivities =(event) => {\n        event.preventDefault();\n        \n        props.history.push('/activities');\n    }\n    let onToMain =(event) => {\n        event.preventDefault();\n        \n        props.history.push('/');\n    }\n    \n\n    let colors = [\"#BABABA\", \"#BABABA\", \"#BABABA\", \"#BABABA\", \"#BABABA\"]\n    for (let i = 0; i <= satisfaction * 4; i++) {\n        colors[i] = \"#FBFF4E\";\n    }\n\n    const arrowClass = classnames(styles.arrow, {\n        [styles.moving]: move\n      });\n    return (\n        <div className = {styles.mainFrame}>\n            <Text textStyle={0} color_name={'blue'}>RELAX</Text>\n            <div>\n                <div className = {styles.activities_list}>\n                    \n\n                    {response.map((elem, index, array) =>\n                        <ActivitiesElemPresentation key = {elem.id} props={elem} moving = {move} delay = {100 * (array.length - index)}> \n                        </ActivitiesElemPresentation>\n                    )} \n                    <div className = {styles.scales}>\n                        <svg width=\"335\" height=\"165\" viewBox=\"0 0 335 165\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path d=\"M23.5442 24L8.434e-06 68.5263L0 165L335 165L335 68.5263L312.801 24L23.5442 24Z\" fill=\"#828282\"/>\n                            <path d=\"M159 61C108.19 61 67 102.638 67 154H251C251 102.638 209.81 61 159 61Z\" fill=\"#F2F2F2\"/>\n                            <rect x=\"153\" y=\"66\" width=\"7\" height=\"18\" fill=\"#333333\"/>\n                            <rect x=\"95.7709\" y=\"94.7069\" width=\"6.71741\" height=\"18.8087\" transform=\"rotate(-45 95.7709 94.7069)\" fill=\"#333333\"/>\n                            <rect x=\"73\" y=\"150\" width=\"6\" height=\"19\" transform=\"rotate(-90 73 150)\" fill=\"#333333\"/>\n                            <rect x=\"219.236\" y=\"89.957\" width=\"6.71741\" height=\"18.8087\" transform=\"rotate(45 219.236 89.957)\" fill=\"#333333\"/>\n                            <rect x=\"247\" y=\"144\" width=\"6\" height=\"19\" transform=\"rotate(90 247 144)\" fill=\"#333333\"/>\n                            <path d=\"M52 131L54.9187 139.637H64.3637L56.7225 144.975L59.6412 153.613L52 148.275L44.3588 153.613L47.2775 144.975L39.6363 139.637H49.0813L52 131Z\" fill={colors[0]}/>\n                            <path d=\"M82 63L84.9187 71.9828H94.3637L86.7225 77.5344L89.6412 86.5172L82 80.9656L74.3588 86.5172L77.2775 77.5344L69.6363 71.9828H79.0813L82 63Z\" fill={colors[1]}/>\n                            <path d=\"M157 32L159.919 41.3283H169.364L161.723 47.0935L164.641 56.4217L157 50.6565L149.359 56.4217L152.277 47.0935L144.636 41.3283H154.081L157 32Z\" fill={colors[2]}/>\n                            <path d=\"M242 63L244.919 71.9828H254.364L246.723 77.5344L249.641 86.5172L242 80.9656L234.359 86.5172L237.277 77.5344L229.636 71.9828H239.081L242 63Z\" fill={colors[3]}/>\n                            <path d=\"M267 131L269.919 139.637H279.364L271.723 144.975L274.641 153.613L267 148.275L259.359 153.613L262.277 144.975L254.636 139.637H264.081L267 131Z\" fill={colors[4]}/>\n                            <rect x=\"7\" width=\"321\" height=\"20\" fill=\"#828282\"/>\n                        </svg>\n                    </div>\n\n                    <svg className = {styles.arrow}  style =  {{transitionDuration: 0.5 * satisfaction + \"s\", transitionDelay: 100 + 100 * response.length + \"ms\", transform: false && \"translateX(-100%) translateY(-25px) rotate(\" + satisfaction * 180 + \"deg)\"}} width=\"71\" height=\"14\" viewBox=\"0 0 71 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M0 10.2667L0 4.2L71 -5.96046e-08V14L0 10.2667Z\" fill=\"#FF0000\"/>\n                    </svg>\n\n                </div>\n            </div>\n            <div className = {styles.column}>\n                <Button onClick = {onToMain} inversed={true}>\n                        Override relax time\n                </Button> \n                <Button onClick = {onToActivities} inversed={false}>\n                        Go to my activities\n                </Button> \n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n      data: state.data    \n    }\n  };\n\nexport default connect(mapStateToProps)(Response)"]},"metadata":{},"sourceType":"module"}