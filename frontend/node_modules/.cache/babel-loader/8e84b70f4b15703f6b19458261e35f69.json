{"ast":null,"code":"var _jsxFileName = \"/home/mr_tross/Fullstack/torelax/src/components/ResponseFrame/Response.js\";\nimport { Provider } from 'react-redux';\nimport { connect } from \"react-redux\";\nimport ActivitiesElemPresentation from '../ActivitiesFrame/ActivitiesElem/ActivitiesElemPresentation';\nimport styles from './index.module.css';\nimport React from 'react';\nimport Text from '../Text/Text';\nimport Button from '../Button/Button';\n\nfunction getMinutes(time) {\n  return parseInt(time.substring(0, 2)) * 60 + parseInt(time.substring(3, 5));\n}\n\nfunction getResponse(data, request) {\n  let max = getMax(data, getMinutes(request));\n  return max.data;\n}\n\nfunction getMax(data, minutes) {\n  if (data.length === 0) {\n    return {\n      data: [],\n      sum: 0\n    };\n  }\n\n  let max_sum = 0;\n  let max_data = [];\n  data.forEach((item, index, array) => {\n    let curr_data = data.slice();\n    let removed = curr_data.splice(index, 1);\n    let curr_minutes = getMinutes(removed[0].time);\n\n    if (curr_minutes <= minutes) {\n      let curr = getMax(curr_data, minutes - getMinutes(removed[0].time));\n\n      if (curr.sum + removed[0].rating * curr_minutes > max_sum) {\n        max_sum = curr.sum + removed[0].rating * curr_minutes;\n        max_data = removed.concat(curr.data);\n      }\n    }\n  });\n  return {\n    data: max_data,\n    sum: max_sum\n  };\n}\n\nfunction Response(props) {\n  const request = props.request.request;\n  const response = getResponse(props.data, request);\n  const $activities = /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.activities_list,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 26\n    }\n  }, response.map(elem => /*#__PURE__*/React.createElement(ActivitiesElemPresentation, {\n    key: elem.id,\n    props: elem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  })));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, request), /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, getMinutes(request)), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      console.log(\"boxElements\", $activities.props.children);\n      let len = $activities.props.children.length;\n      console.log(len);\n\n      for (let i = 0; i < len; ++i) {\n        $activities.props.children[i].classList.add('move');\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }), $activities);\n}\n\nconst mapStateToProps = state => {\n  return {\n    data: state.data\n  };\n};\n\nexport default connect(mapStateToProps)(Response);","map":{"version":3,"sources":["/home/mr_tross/Fullstack/torelax/src/components/ResponseFrame/Response.js"],"names":["Provider","connect","ActivitiesElemPresentation","styles","React","Text","Button","getMinutes","time","parseInt","substring","getResponse","data","request","max","getMax","minutes","length","sum","max_sum","max_data","forEach","item","index","array","curr_data","slice","removed","splice","curr_minutes","curr","rating","concat","Response","props","response","$activities","activities_list","map","elem","id","console","log","children","len","i","classList","add","mapStateToProps","state"],"mappings":"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","sourcesContent":["import {Provider} from 'react-redux'\nimport {connect} from \"react-redux\";\nimport ActivitiesElemPresentation from '../ActivitiesFrame/ActivitiesElem/ActivitiesElemPresentation'  \nimport styles from './index.module.css';\nimport React from 'react';\nimport Text from '../Text/Text'\nimport Button from '../Button/Button'\n\n\nfunction getMinutes(time) {\n    return parseInt(time.substring(0, 2)) * 60 + parseInt(time.substring(3, 5));\n}\n\nfunction getResponse(data, request) {\n    let max = getMax(data, getMinutes(request));\n    return max.data;\n}\n\nfunction getMax(data, minutes) {\n    if (data.length === 0) {\n        return {\n            data: [],\n            sum: 0\n        };\n    }\n    let max_sum = 0;\n    let max_data = [];\n    data.forEach((item, index, array)=> {\n        let curr_data = data.slice();\n        let removed = curr_data.splice(index, 1);\n        let curr_minutes = getMinutes(removed[0].time);\n        if (curr_minutes <= minutes) {\n             let curr = getMax(curr_data, minutes - getMinutes(removed[0].time))\n            if (curr.sum + removed[0].rating * curr_minutes > max_sum) {\n                max_sum = curr.sum + removed[0].rating * curr_minutes; \n                max_data = removed.concat(curr.data)\n            }\n        }\n    });\n    return {\n        data: max_data,\n        sum: max_sum\n    };\n}\n\n\n\nfunction Response(props) {\n    const request = props.request.request\n    const response = getResponse(props.data, request)\n    const $activities = (<div className = {styles.activities_list}>\n        {response.map(elem =>\n                <ActivitiesElemPresentation key = {elem.id} props={elem}>\n                </ActivitiesElemPresentation>) } \n        </div>)\n    return (\n        <div>\n            <Text>{request}</Text>\n            <Text>{getMinutes(request)}</Text>\n            <Button onClick = {() => {\n                console.log(\"boxElements\", $activities.props.children)\n                let len = $activities.props.children.length\n                console.log(len)\n                for (let i = 0; i < len; ++i) {\n                    $activities.props.children[i].classList.add('move')\n                }\n            }}></Button>\n            {$activities}\n        </div>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n      data: state.data    \n    }\n  };\n\nexport default connect(mapStateToProps)(Response)"]},"metadata":{},"sourceType":"module"}