{"ast":null,"code":"let data = [{\n  user: {\n    login: \"trrttrtrsrfewrwed\",\n    email: \"nurgaliev.tr@phystech.edu\"\n  },\n  password: \"qwerty\",\n  data: [{\n    id: 1,\n    name: \"Пошутить\",\n    category: \"outdoors\",\n    description: \"Смешно пошутить\",\n    time: \"12:22\",\n    rating: 4,\n    minimized: true\n  }]\n}];\n\nfunction resolveAfter2Seconds(x) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(x);\n    }, 2000);\n  });\n}\n\nfunction rejectAfter1Second(error) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      reject(error);\n    }, 1000);\n  });\n}\n\nasync function addUser(user, password) {\n  if (data.find(elem => {\n    return elem.user.email == user.email;\n  }) == null) {\n    console.log(\"addUser OK\");\n    data.push({\n      user: user,\n      password: password,\n      data: []\n    });\n    return resolveAfter2Seconds({\n      user: user,\n      password: password,\n      data: []\n    });\n  } else {\n    console.log(\"addUser REJECT\");\n    return rejectAfter1Second(\"user with such email already exists\");\n  }\n}\n\nasync function enter(email, password) {\n  console.log(\"enter\", email, password);\n  let find_result = data.find(elem => {\n    return elem.user.email == email && elem.password == password;\n  });\n  console.log(find_result);\n\n  if (find_result == null) {\n    console.log(\"enter REJECT\");\n    return rejectAfter1Second(\"incorrect email or password\");\n  } else {\n    console.log(\"enter OK\");\n    return resolveAfter2Seconds(find_result);\n  }\n}\n\nasync function lout() {\n  console.log(\"logout\");\n  return resolveAfter2Seconds(null);\n}\n\nconst UserService = {\n  signup(user, password) {\n    return addUser(user, password); //return http('signup', 'POST', {user, password})\n  },\n\n  login(email, password) {\n    console.log('login');\n    return enter(email, password); //return http('signin', 'POST', {email, password})\n  },\n\n  logout() {\n    return lout(); //return http('signout', 'DELETE')\n  }\n\n};\nexport default UserService;","map":{"version":3,"sources":["/home/mr_tross/Fullstack/torelax/src/userService/index.js"],"names":["data","user","login","email","password","id","name","category","description","time","rating","minimized","resolveAfter2Seconds","x","Promise","resolve","setTimeout","rejectAfter1Second","error","reject","addUser","find","elem","console","log","push","enter","find_result","lout","UserService","signup","logout"],"mappings":"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","sourcesContent":["let data = [\n    {user: {login: \"trrttrtrsrfewrwed\", email: \"nurgaliev.tr@phystech.edu\"},\n     password: \"qwerty\", data: [{id: 1, name: \"Пошутить\", category: \"outdoors\", description: \"Смешно пошутить\", time: \"12:22\", rating: 4, minimized: true\n    }]}\n]\n\nfunction resolveAfter2Seconds(x) {\n    return new Promise(resolve => {\n      setTimeout(() => {\n        resolve(x);\n      }, 2000);\n    });\n}\n\nfunction rejectAfter1Second(error) {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n          reject(error);\n        }, 1000);\n      });\n}\n\nasync function addUser(user, password) {\n    if (data.find((elem) => { return elem.user.email == user.email}) == null) {\n        console.log(\"addUser OK\")\n        data.push({user: user, password: password, data: []})\n        return resolveAfter2Seconds({user: user, password: password, data: []})\n    } else {\n        console.log(\"addUser REJECT\")\n        return rejectAfter1Second(\"user with such email already exists\")\n    }   \n} \n\nasync function enter(email, password) {\n    console.log(\"enter\", email, password)\n    let find_result = data.find((elem) => { return elem.user.email == email && elem.password == password})\n    console.log(find_result)\n    if (find_result == null) {\n        console.log(\"enter REJECT\")\n        return rejectAfter1Second(\"incorrect email or password\")\n    } else {\n        console.log(\"enter OK\")\n        return resolveAfter2Seconds(find_result)\n    }   \n} \n\nasync function lout() {\n    console.log(\"logout\")\n    return resolveAfter2Seconds(null);\n}\n\nconst UserService = {\n  signup(user, password) {\n    return addUser(user, password)\n    //return http('signup', 'POST', {user, password})\n  },\n  login(email, password) {\n    console.log('login');\n    return enter(email, password)\n    //return http('signin', 'POST', {email, password})\n  },\n  logout() {\n      return lout()\n    //return http('signout', 'DELETE')\n  },\n};\n\nexport default UserService;"]},"metadata":{},"sourceType":"module"}