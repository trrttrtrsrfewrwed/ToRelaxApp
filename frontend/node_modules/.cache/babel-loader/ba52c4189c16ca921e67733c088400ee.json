{"ast":null,"code":"var _jsxFileName = \"/home/mr_tross/Fullstack/torelax/src/components/ResponseFrame/Response.js\";\nimport { Provider } from 'react-redux';\nimport { connect } from \"react-redux\";\nimport ActivitiesElemPresentation from '../ActivitiesFrame/ActivitiesElem/ActivitiesElemPresentation';\nimport styles from './index.module.css';\nimport React from 'react';\nimport Text from '../Text/Text';\n\nfunction getMinutes(time) {\n  return parseInt(time.substring(0, 2)) * 60 + parseInt(time.substring(3, 5));\n}\n\nfunction getResponse(data, request) {\n  let max = getMax(data, getMinutes(request));\n  return max.data;\n}\n\nfunction getMax(data, minutes) {\n  if (data.length === 0) {\n    return {\n      data: [],\n      sum: 0\n    };\n  }\n\n  let max_sum = 0;\n  let max_data = [];\n  data.forEach((item, index, array) => {\n    let curr_data = data.slice();\n    let removed = curr_data.splice(index, 1);\n    let curr_minutes = getMinutes(removed[0].time);\n\n    if (curr_minutes <= minutes) {\n      console.log(\"curr_minutes\", curr_minutes);\n      let curr = getMax(curr_data, minutes - getMinutes(removed[0].time));\n      console.log(\"curr\", curr);\n\n      if (curr.sum + removed[0].rating * curr_minutes > max_sum) {\n        console.log(\"updating max data\");\n        max_sum = curr.sum + removed[0].rating * curr_minutes;\n        max_data = removed.concat(curr.data);\n        console.log(\"max data\", max_data);\n      }\n    }\n  });\n  console.log(\"max_data\", max_data);\n  return {\n    data: max_data,\n    sum: max_sum\n  };\n}\n\nfunction Response(props) {\n  const request = props.request.request;\n  const response = getResponse(props.data, request);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#go\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"fa fa-power-off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 27\n    }\n  }), \"\\u0417\\u0430\\u043F\\u0443\\u0441\\u0442\\u0438\\u0442\\u044C\"), /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, request), /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, getMinutes(request)), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"go\",\n    className: styles.activities_list,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, response.map(elem => /*#__PURE__*/React.createElement(ActivitiesElemPresentation, {\n    className: styles.moving,\n    key: elem.id,\n    props: elem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 25\n    }\n  }))));\n}\n\nconst mapStateToProps = state => {\n  return {\n    data: state.data\n  };\n};\n\nexport default connect(mapStateToProps)(Response);","map":{"version":3,"sources":["/home/mr_tross/Fullstack/torelax/src/components/ResponseFrame/Response.js"],"names":["Provider","connect","ActivitiesElemPresentation","styles","React","Text","getMinutes","time","parseInt","substring","getResponse","data","request","max","getMax","minutes","length","sum","max_sum","max_data","forEach","item","index","array","curr_data","slice","removed","splice","curr_minutes","console","log","curr","rating","concat","Response","props","response","activities_list","map","elem","moving","id","mapStateToProps","state"],"mappings":"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","sourcesContent":["import {Provider} from 'react-redux'\nimport {connect} from \"react-redux\";\nimport ActivitiesElemPresentation from '../ActivitiesFrame/ActivitiesElem/ActivitiesElemPresentation'  \nimport styles from './index.module.css';\nimport React from 'react';\nimport Text from '../Text/Text'\n\nfunction getMinutes(time) {\n    return parseInt(time.substring(0, 2)) * 60 + parseInt(time.substring(3, 5));\n}\n\nfunction getResponse(data, request) {\n    let max = getMax(data, getMinutes(request));\n    return max.data;\n}\n\nfunction getMax(data, minutes) {\n    if (data.length === 0) {\n        return {\n            data: [],\n            sum: 0\n        };\n    }\n    let max_sum = 0;\n    let max_data = [];\n    data.forEach((item, index, array)=> {\n        let curr_data = data.slice();\n        let removed = curr_data.splice(index, 1);\n        let curr_minutes = getMinutes(removed[0].time);\n        if (curr_minutes <= minutes) {\n            console.log(\"curr_minutes\", curr_minutes)\n            let curr = getMax(curr_data, minutes - getMinutes(removed[0].time))\n            console.log(\"curr\", curr)\n            if (curr.sum + removed[0].rating * curr_minutes > max_sum) {\n                console.log(\"updating max data\")\n                max_sum = curr.sum + removed[0].rating * curr_minutes; \n                max_data = removed.concat(curr.data)\n                console.log(\"max data\", max_data)\n            }\n        }\n    });\n    console.log(\"max_data\", max_data)\n    return {\n        data: max_data,\n        sum: max_sum\n    };\n}\n\n\n\nfunction Response(props) {\n    const request = props.request.request\n    const response = getResponse(props.data, request)\n    return (\n        <div>\n            <a href=\"#go\"><span class=\"fa fa-power-off\"></span>Запустить</a>\n            <Text>{request}</Text>\n            <Text>{getMinutes(request)}</Text>\n            <div id=\"go\" className = {styles.activities_list}>\n                {response.map(elem =>\n                        <ActivitiesElemPresentation className = {styles.moving} key = {elem.id} props={elem}>\n                        </ActivitiesElemPresentation>)}\n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n      data: state.data    \n    }\n  };\n\nexport default connect(mapStateToProps)(Response)"]},"metadata":{},"sourceType":"module"}